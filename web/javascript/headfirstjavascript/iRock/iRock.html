<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>iRock - The Virtual Pet Rock</title>
  <script type="text/javascript" src="cookie.js"></script>

  <script type="text/javascript">
    var userName;

    function resizeRock(){
      img = document.getElementById("rockImg")
      img.style.height = (document.documentElement.clientHeight - 100) * 0.9 +'px';
    }

    function greetUser(){
      if(navigator.cookieEnabled)
        userName = readCookie("irock_username");
      if(userName){
        alert("こんにちは" + userName + "さん、会えなくて寂しかったです。");
      }else{
        alert("こんにちは。私はiRockです。")
      }
    }

    function touchRock(){
      if(userName){
        alert(userName + "さん、声をかけてくれてありがとう。");
      }else{
        userName = prompt("あなたのお名前は？");
        if(userName){
          alert("はじめまして、" + userName + "さん。");
          if(navigator.cookieEnabled)
            writeCookie("irock_username", userName, 5 * 365);
          else
            alert("このブラウザではクッキーがサポートされていないのであなたのことを覚えられません。ごめんなさい。")
        }
      }
      document.getElementById("rockImg").src = "rock_happy.png";
      setTimeout("document.getElementById('rockImg').src = 'rock.png';", 5*60*1000);
    }
  </script>
</head>

<body onload="resizeRock(); greetUser();" onresize="resizeRock();">
  <div style="margin-top:100px; text-align:center">
    <img id="rockImg" src="rock.png" alt="iRock" style="cursor:pointer" onclick="touchRock();"/>
  </div>
</body>

</html>
